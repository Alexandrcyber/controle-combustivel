<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Manual - Valida√ß√£o de Datas para PDF</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-case {
            border: 1px solid #ddd;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .test-case h4 {
            margin-top: 0;
            color: #333;
        }
        .form-group {
            margin: 10px 0;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, select, button {
            padding: 8px 12px;
            margin: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            background-color: #007bff;
            color: white;
            cursor: pointer;
            border: none;
        }
        button:hover {
            background-color: #0056b3;
        }
        .success {
            color: #28a745;
        }
        .error {
            color: #dc3545;
        }
        .result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
        }
        .result.success {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
        }
        .result.error {
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <h1>üß™ Teste Manual - Valida√ß√£o de Datas para PDF</h1>
    <p><strong>Data do teste:</strong> 7 de junho de 2025</p>
    <p><strong>Objetivo:</strong> Verificar se as valida√ß√µes de data est√£o funcionando corretamente para os relat√≥rios PDF</p>

    <!-- Teste 1: Relat√≥rio de Consumo -->
    <div class="test-section">
        <h2>üìä Teste 1: Relat√≥rio de Consumo (exportarPdfCompleto)</h2>
        
        <div class="test-case">
            <h4>Caso 1A: Tentar exportar PDF sem selecionar datas</h4>
            <p><strong>Resultado esperado:</strong> Deve exibir alerta "Por favor, selecione o per√≠odo para gerar o relat√≥rio PDF."</p>
            
            <div class="form-group">
                <label>Data In√≠cio:</label>
                <input type="date" id="dataInicio" value="">
            </div>
            <div class="form-group">
                <label>Data Fim:</label>
                <input type="date" id="dataFim" value="">
            </div>
            <div class="form-group">
                <label>Caminh√£o:</label>
                <select id="caminhaoSelect">
                    <option value="">Todos os caminh√µes</option>
                </select>
            </div>
            <button onclick="testarExportarPdfCompleto()">üöÄ Exportar PDF Completo</button>
            <div id="resultado1A" class="result" style="display: none;"></div>
        </div>

        <div class="test-case">
            <h4>Caso 1B: Tentar exportar PDF com datas preenchidas</h4>
            <p><strong>Resultado esperado:</strong> Deve prosseguir com a gera√ß√£o (ou mostrar que passou na valida√ß√£o)</p>
            
            <div class="form-group">
                <label>Data In√≠cio:</label>
                <input type="date" id="dataInicio2" value="2025-05-01">
            </div>
            <div class="form-group">
                <label>Data Fim:</label>
                <input type="date" id="dataFim2" value="2025-05-31">
            </div>
            <div class="form-group">
                <label>Caminh√£o:</label>
                <select id="caminhaoSelect2">
                    <option value="">Todos os caminh√µes</option>
                </select>
            </div>
            <button onclick="testarExportarPdfCompleto2()">üöÄ Exportar PDF Completo</button>
            <div id="resultado1B" class="result" style="display: none;"></div>
        </div>
    </div>

    <!-- Teste 2: Relat√≥rio de Custos -->
    <div class="test-section">
        <h2>üí∞ Teste 2: Relat√≥rio de Custos (exportarPdfCustos)</h2>
        
        <div class="test-case">
            <h4>Caso 2A: Tentar exportar PDF de custos sem selecionar datas</h4>
            <p><strong>Resultado esperado:</strong> Deve exibir alerta "Por favor, selecione o per√≠odo para gerar o relat√≥rio de custos."</p>
            
            <div class="form-group">
                <label>Data In√≠cio:</label>
                <input type="date" id="custosDataInicio" value="">
            </div>
            <div class="form-group">
                <label>Data Fim:</label>
                <input type="date" id="custosDataFim" value="">
            </div>
            <div class="form-group">
                <label>Caminh√£o:</label>
                <select id="caminhaoCustosSelect">
                    <option value="">Todos os caminh√µes</option>
                </select>
            </div>
            <button onclick="testarExportarPdfCustos()">üí∞ Exportar PDF Custos</button>
            <div id="resultado2A" class="result" style="display: none;"></div>
        </div>

        <div class="test-case">
            <h4>Caso 2B: Tentar exportar PDF de custos com datas preenchidas</h4>
            <p><strong>Resultado esperado:</strong> Deve prosseguir com a gera√ß√£o (ou mostrar que passou na valida√ß√£o)</p>
            
            <div class="form-group">
                <label>Data In√≠cio:</label>
                <input type="date" id="custosDataInicio2" value="2025-05-01">
            </div>
            <div class="form-group">
                <label>Data Fim:</label>
                <input type="date" id="custosDataFim2" value="2025-05-31">
            </div>
            <div class="form-group">
                <label>Caminh√£o:</label>
                <select id="caminhaoCustosSelect2">
                    <option value="">Todos os caminh√µes</option>
                </select>
            </div>
            <button onclick="testarExportarPdfCustos2()">üí∞ Exportar PDF Custos</button>
            <div id="resultado2B" class="result" style="display: none;"></div>
        </div>
    </div>

    <!-- Instru√ß√µes de teste -->
    <div class="test-section">
        <h2>üìã Instru√ß√µes de Teste</h2>
        <ol>
            <li><strong>Teste 1A:</strong> Clique em "Exportar PDF Completo" sem preencher as datas</li>
            <li><strong>Teste 1B:</strong> Clique em "Exportar PDF Completo" com as datas j√° preenchidas</li>
            <li><strong>Teste 2A:</strong> Clique em "Exportar PDF Custos" sem preencher as datas</li>
            <li><strong>Teste 2B:</strong> Clique em "Exportar PDF Custos" com as datas j√° preenchidas</li>
        </ol>
        
        <h3>‚úÖ Crit√©rios de Sucesso:</h3>
        <ul>
            <li>Casos A devem mostrar alertas de valida√ß√£o</li>
            <li>Casos B devem prosseguir sem mostrar alertas de valida√ß√£o</li>
            <li>Alertas devem usar SweetAlert2 (visual moderno)</li>
            <li>Mensagens devem ser amig√°veis e claras</li>
        </ul>
    </div>

    <script>
        // Simular as fun√ß√µes do sistema principal para teste
        function mostrarResultado(elementId, sucesso, mensagem) {
            const elemento = document.getElementById(elementId);
            elemento.style.display = 'block';
            elemento.className = `result ${sucesso ? 'success' : 'error'}`;
            elemento.innerHTML = `<strong>${sucesso ? '‚úÖ Sucesso:' : '‚ùå Erro:'}</strong> ${mensagem}`;
        }

        function testarExportarPdfCompleto() {
            const dataInicio = document.getElementById('dataInicio').value;
            const dataFim = document.getElementById('dataFim').value;
            
            if (!dataInicio || !dataFim) {
                // Simular o alerta que deveria aparecer
                mostrarResultado('resultado1A', true, 'Valida√ß√£o funcionou! Deveria aparecer alerta: "Por favor, selecione o per√≠odo para gerar o relat√≥rio PDF."');
                
                // Tentar chamar a fun√ß√£o real se estiver dispon√≠vel
                if (typeof window.exportarPdfCompleto === 'function') {
                    try {
                        window.exportarPdfCompleto();
                    } catch (error) {
                        console.log('Erro esperado na fun√ß√£o real:', error);
                    }
                }
            } else {
                mostrarResultado('resultado1A', false, 'Teste falhou - deveria ter detectado datas vazias');
            }
        }

        function testarExportarPdfCompleto2() {
            const dataInicio = document.getElementById('dataInicio2').value;
            const dataFim = document.getElementById('dataFim2').value;
            
            if (dataInicio && dataFim) {
                mostrarResultado('resultado1B', true, 'Valida√ß√£o passou! Datas est√£o preenchidas, deveria prosseguir.');
                
                // Tentar chamar a fun√ß√£o real se estiver dispon√≠vel
                if (typeof window.exportarPdfCompleto === 'function') {
                    // Temporariamente alterar os valores dos campos principais
                    const origInicio = document.querySelector('#dataInicio')?.value;
                    const origFim = document.querySelector('#dataFim')?.value;
                    
                    if (document.querySelector('#dataInicio')) {
                        document.querySelector('#dataInicio').value = dataInicio;
                    }
                    if (document.querySelector('#dataFim')) {
                        document.querySelector('#dataFim').value = dataFim;
                    }
                    
                    try {
                        window.exportarPdfCompleto();
                    } catch (error) {
                        console.log('Poss√≠vel erro na gera√ß√£o:', error);
                    }
                    
                    // Restaurar valores originais
                    if (document.querySelector('#dataInicio')) {
                        document.querySelector('#dataInicio').value = origInicio || '';
                    }
                    if (document.querySelector('#dataFim')) {
                        document.querySelector('#dataFim').value = origFim || '';
                    }
                }
            } else {
                mostrarResultado('resultado1B', false, 'Teste falhou - datas deveriam estar preenchidas');
            }
        }

        function testarExportarPdfCustos() {
            const dataInicio = document.getElementById('custosDataInicio').value;
            const dataFim = document.getElementById('custosDataFim').value;
            
            if (!dataInicio || !dataFim) {
                mostrarResultado('resultado2A', true, 'Valida√ß√£o funcionou! Deveria aparecer alerta: "Por favor, selecione o per√≠odo para gerar o relat√≥rio de custos."');
                
                // Tentar chamar a fun√ß√£o real se estiver dispon√≠vel
                if (typeof window.exportarPdfCustos === 'function') {
                    try {
                        window.exportarPdfCustos();
                    } catch (error) {
                        console.log('Erro esperado na fun√ß√£o real:', error);
                    }
                }
            } else {
                mostrarResultado('resultado2A', false, 'Teste falhou - deveria ter detectado datas vazias');
            }
        }

        function testarExportarPdfCustos2() {
            const dataInicio = document.getElementById('custosDataInicio2').value;
            const dataFim = document.getElementById('custosDataFim2').value;
            
            if (dataInicio && dataFim) {
                mostrarResultado('resultado2B', true, 'Valida√ß√£o passou! Datas est√£o preenchidas, deveria prosseguir.');
                
                // Tentar chamar a fun√ß√£o real se estiver dispon√≠vel
                if (typeof window.exportarPdfCustos === 'function') {
                    // Temporariamente alterar os valores dos campos principais
                    const origInicio = document.querySelector('#custosDataInicio')?.value;
                    const origFim = document.querySelector('#custosDataFim')?.value;
                    
                    if (document.querySelector('#custosDataInicio')) {
                        document.querySelector('#custosDataInicio').value = dataInicio;
                    }
                    if (document.querySelector('#custosDataFim')) {
                        document.querySelector('#custosDataFim').value = dataFim;
                    }
                    
                    try {
                        window.exportarPdfCustos();
                    } catch (error) {
                        console.log('Poss√≠vel erro na gera√ß√£o:', error);
                    }
                    
                    // Restaurar valores originais
                    if (document.querySelector('#custosDataInicio')) {
                        document.querySelector('#custosDataInicio').value = origInicio || '';
                    }
                    if (document.querySelector('#custosDataFim')) {
                        document.querySelector('#custosDataFim').value = origFim || '';
                    }
                }
            } else {
                mostrarResultado('resultado2B', false, 'Teste falhou - datas deveriam estar preenchidas');
            }
        }

        // Log para debugar se as fun√ß√µes est√£o dispon√≠veis
        console.log('üîç Verificando fun√ß√µes dispon√≠veis:');
        console.log('exportarPdfCompleto:', typeof window.exportarPdfCompleto);
        console.log('exportarPdfCustos:', typeof window.exportarPdfCustos);
        console.log('AlertError:', typeof window.AlertError);
    </script>
</body>
</html>
